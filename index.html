<!doctype html>

<html>
  <header>
    <h1>Conway's game of life using WebGPU</h1>
    <a href="https://github.com/VincentPHAM98/WebGPULife">Vincent PHAM - Github</a>
  </header>
  <head>
    <meta charset="utf-8">
    <title>WebGPU Life</title>
  </head>
  <body>
    <div class="slidecontainer">
      <p>Canvas size :</p>
      <input type="range" id="canvasInput" 
       name="canvasInput" min="8" max="1024" value="512"
       oninput="canvasVal.value=canvasInput.value">                                                       
      <output name="canvasVal" id="canvasVal" for="canvasInput">512</output>
      
      <p>Grid size (max = canvas size):</p>
      <input type="range" id="gridInput" 
       name="gridInput" min="8" max="1024" value="512"
       oninput="gridVal.value=gridInput.value">                                                       
      <output name="gridVal" id="gridVal" for="gridInput">512</output>
      
      <p>Delta time (ms) : </p>
      <input type="range" id="dtInput" 
       name="dtInput" min="1" max="1000" value="50"
       oninput="dtVal.value=dtInput.value">                                                       
      <output name="dtVal" id="dtVal" for="dtInput">50</output>

      <p>Cell initial state randomness : </p>
      <input type="range" id="cellRandInput" 
       name="cellRandInput" min="0" max="1" value="0.6" step="0.01"
       oninput="cellRandVal.value=cellRandInput.value">                                                       
      <output name="cellRandVal" id="cellRandVal" for="cellRandInput">0.6</output>

    </div>

    <button style="display:block" onclick="launchConway()">Launch Game of life</button>

    <script>
      function launchConway() {
        // Get the existing script element
        var existingScript = document.getElementById('gameOfLife');

        var existingCanvas = document.getElementById('conwayCanvas')

        // If the script exists, remove it
        if (existingScript) {
          existingScript.parentNode.removeChild(existingScript);
        }

        if (existingCanvas) {
          existingCanvas.parentNode.removeChild(existingCanvas);
        }
  

        var newCanvas = document.createElement('canvas');
        newCanvas.id = 'conwayCanvas';
        newCanvas.width = document.getElementById("canvasInput").value
        newCanvas.height = document.getElementById("canvasInput").value
        newCanvas.style = "border:1px solid #000";

        document.body.appendChild(newCanvas);
  
        // Create a new script element
        var newScript = document.createElement('script');
        newScript.id = 'gameOfLife';
        newScript.type = 'module';
        newScript.src = 'js/gameOfLife.js'; // Change this to the path of your script
  
        // Append the new script to the document body
        document.body.appendChild(newScript);
      }
    </script>
  </body>
</html>